// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["mongoDb"]
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  mobileNumber String @unique
  password     String
  username     String @default("Kuldeep")

  email         String  @unique
  isPaymentDone Boolean @default(false)
  tradeName     String
  designation   String
  isAdmin       Boolean @default(false)
  // gstNumber   GstNumber @relation(fields: [gstNumberId], references: [id])
  gstNumber     String?  @unique
  panNumber     String?  @unique

  typeOfBuisness    String?
  startYear         String?
  addressOfBuisness String?

  isBlocked  Boolean @default(false)
  reportedBy User[]  @relation("RUserToUser")

  gstNumberId     String
  RUser           User?   @relation("RUserToUser", fields: [reportingUserId], references: [id], onUpdate: NoAction, onDelete: NoAction)
  reportingUserId String? @db.ObjectId
  @@map("Users")
}

model GstNumber {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  gstNumberId String   @unique
  capturedAt  DateTime @default(now())

  legalNameOfBuisness          String
  tradeName                    String
  effactiveDateOfRegistration  String
  constitutionOfBuisness       String
  GSTIN_status                 String
  taxpayerType                 String
  adminOffice                  String
  otherOffice                  String
  principalPlaceOfBuisness     String
  isAadhaarAuthenticated       Boolean
  isEycVerified                Boolean
  natureOfCoreBuisnessActivity String
  natureOfBuisnessActivities   String[]

  // User User[]
  @@map("GstNumbers")
}

model Payment {
  id        String   @id @default(auto()) @map("_id") @db.ObjectId
  data      Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt


  @@map("Payments")
}

model MerchantInfo {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  mid         String
  mkey        String
  amount      String
  websiteName String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt


  @@map("Merchant")
}
